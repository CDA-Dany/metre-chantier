<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Suivi Métré</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<header class="topbar">
    <div class="search-container">
        <input id="searchInput" type="text" placeholder="Recherche par nom…">
    </div>

    <div class="chantier-select">
        <button id="chantierBtn">Chantiers ▾</button>
        <div id="chantierMenu" class="chantier-menu"></div>
    </div>
</header>

<!-- Checkbox "Masquer les lignes faites" au-dessus du tableau -->
<div class="filter-container">
    <label>
        <input type="checkbox" id="toggleFait">
        Masquer les lignes faites
    </label>
</div>


<div class="resume">
    <span id="totalGlobal">Total global : 0 €</span>
    <span id="restantGlobal">Restant global : 0 €</span>
</div>

<table id="mainTable">
    <thead></thead>
    <tbody></tbody>
</table>

<script type="module">
  // Import Firebase App et Firestore
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

  // Config Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyDWRNVnwrxuxx-ykwBm4D7BXivhyg1HAtE",
    authDomain: "metre-bet-3dcb1.firebaseapp.com",
    projectId: "metre-bet-3dcb1",
    storageBucket: "metre-bet-3dcb1.firebasestorage.app",
    messagingSenderId: "2779044366",
    appId: "1:2779044366:web:141773b07da783aacd7a5f"
  };

  // Initialise Firebase App
  const app = initializeApp(firebaseConfig);

  // Initialise Firestore
  const db = getFirestore(app);

  // ===== Test simple pour vérifier la connexion =====
  async function testFirestore() {
    try {
      // Crée un document test dans la collection "test"
      await setDoc(doc(db, "test", "ligne1"), { checked: false });
      console.log("Document créé dans Firestore !");
    } catch(e) {
      console.error("Erreur Firestore :", e);
    }
  }

  testFirestore();

</script>


<script src="script.js"></script>
</body>
</html>








